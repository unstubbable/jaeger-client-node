{"version":3,"sources":["../../../test/samplers/base_sampler_v2.js"],"names":["describe","it","s1","BaseSamplerV2","assert","equal","name","s2","uniqueName","substring","notEqual","s","span","throw","onCreateSpan","Error","d","onSetOperationName","_cachedDecision","onSetTag","done","close"],"mappings":";;AAaA;;AACA;;;;;;AAbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKAA,SAAS,eAAT,EAA0B,YAAM;AAC9BC,KAAG,oBAAH,EAAyB,YAAM;AAC7B,QAAIC,KAAK,IAAIC,cAAJ,CAAkB,OAAlB,CAAT;AACAC,iBAAOC,KAAP,CAAa,OAAb,EAAsBH,GAAGI,IAAH,EAAtB;AACD,GAHD;AAIAL,KAAG,0BAAH,EAA+B,YAAM;AACnC,QAAIC,KAAK,IAAIC,cAAJ,CAAkB,MAAlB,CAAT;AACA,QAAII,KAAK,IAAIJ,cAAJ,CAAkB,MAAlB,CAAT;AACAC,iBAAOC,KAAP,CAAa,MAAb,EAAqBH,GAAGM,UAAH,GAAgBC,SAAhB,CAA0B,CAA1B,EAA6B,CAA7B,CAArB;AACAL,iBAAOC,KAAP,CAAa,MAAb,EAAqBE,GAAGC,UAAH,GAAgBC,SAAhB,CAA0B,CAA1B,EAA6B,CAA7B,CAArB;AACAL,iBAAOM,QAAP,CAAgBR,GAAGM,UAAH,EAAhB,EAAiCD,GAAGC,UAAH,EAAjC;AACD,GAND;AAOAP,KAAG,8BAAH,EAAmC,YAAM;AACvC,QAAIU,IAAI,IAAIR,cAAJ,CAAkB,aAAlB,CAAR;AACA,QAAIS,OAAQ,EAAZ;AACAR,iBAAOS,KAAP,CAAa;AAAA,aAAMF,EAAEG,YAAF,CAAeF,IAAf,CAAN;AAAA,KAAb,EAAyCG,KAAzC,EAAgD,6CAAhD;AACD,GAJD;AAKAd,KAAG,mDAAH,EAAwD,YAAM;AAC5D,QAAIU,IAAI,IAAIR,cAAJ,CAAkB,aAAlB,CAAR;AACA,QAAIS,OAAQ,EAAZ;AACA,QAAII,IAAIL,EAAEM,kBAAF,CAAqBL,IAArB,EAA2B,WAA3B,CAAR;AACAR,iBAAOC,KAAP,CAAaM,EAAEO,eAAf,EAAgCF,CAAhC;AACD,GALD;AAMAf,KAAG,6CAAH,EAAkD,YAAM;AACtD,QAAIU,IAAI,IAAIR,cAAJ,CAAkB,aAAlB,CAAR;AACA,QAAIS,OAAQ,EAAZ;AACA,QAAII,IAAIL,EAAEQ,QAAF,CAAWP,IAAX,EAAiB,KAAjB,EAAwB,OAAxB,CAAR;AACAR,iBAAOC,KAAP,CAAaM,EAAEO,eAAf,EAAgCF,CAAhC;AACD,GALD;AAMAf,KAAG,wCAAH,EAA6C,UAASmB,IAAT,EAAe;AAC1D,QAAIT,IAAI,IAAIR,cAAJ,CAAkB,aAAlB,CAAR;AACAQ,MAAEU,KAAF,GAF0D,CAE/C;AACXV,MAAEU,KAAF,CAAQD,IAAR,EAH0D,CAG3C;AAChB,GAJD;AAKD,CAlCD","file":"base_sampler_v2.js","sourcesContent":["// @flow\n// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except\n// in compliance with the License. You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software distributed under the License\n// is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express\n// or implied. See the License for the specific language governing permissions and limitations under\n// the License.\n\nimport { assert } from 'chai';\nimport BaseSamplerV2 from '../../src/samplers/v2/base';\n\ndescribe('BaseSamplerV2', () => {\n  it('should have name()', () => {\n    let s1 = new BaseSamplerV2('name1');\n    assert.equal('name1', s1.name());\n  });\n  it('should have uniqueName()', () => {\n    let s1 = new BaseSamplerV2('name');\n    let s2 = new BaseSamplerV2('name');\n    assert.equal('name', s1.uniqueName().substring(0, 4));\n    assert.equal('name', s2.uniqueName().substring(0, 4));\n    assert.notEqual(s1.uniqueName(), s2.uniqueName());\n  });\n  it('should throw in onCreateSpan', () => {\n    let s = new BaseSamplerV2('testSampler');\n    let span = ({}: Span);\n    assert.throw(() => s.onCreateSpan(span), Error, 'testSampler does not implement onCreateSpan');\n  });\n  it('should return cached decision from onSetOperation', () => {\n    let s = new BaseSamplerV2('testSampler');\n    let span = ({}: Span);\n    let d = s.onSetOperationName(span, 'operation');\n    assert.equal(s._cachedDecision, d);\n  });\n  it('should return cached decision from onSetTag', () => {\n    let s = new BaseSamplerV2('testSampler');\n    let span = ({}: Span);\n    let d = s.onSetTag(span, 'key', 'value');\n    assert.equal(s._cachedDecision, d);\n  });\n  it('should implement close() with callback', function(done) {\n    let s = new BaseSamplerV2('testSampler');\n    s.close(); // without callback\n    s.close(done); // with callback\n  });\n});\n"]}